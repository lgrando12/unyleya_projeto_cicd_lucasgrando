apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    deployment.kubernetes.io/revision: "2"
    meta.helm.sh/release-name: azure-vote-app
    meta.helm.sh/release-namespace: default
  creationTimestamp: "2025-11-04T23:38:12Z"
  generation: 2
  labels:
    app: azure-vote-front
    app.kubernetes.io/managed-by: Helm
  name: azure-vote-front
  namespace: default
  resourceVersion: "12896"
  uid: 9d54ca09-9ca9-447c-b488-706f43746a45
spec:
  progressDeadlineSeconds: 600
  replicas: 1
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      app: azure-vote-front
  strategy:
    rollingUpdate:
      maxSurge: 25%
      maxUnavailable: 25%
    type: RollingUpdate
  template:
    metadata:
      annotations:
        kubectl.kubernetes.io/restartedAt: "2025-11-04T20:48:54-03:00"
      creationTimestamp: null
      labels:
        app: azure-vote-front
    spec:
      containers:
      - name: azure-vote-front
        image: acrunyleyalucasgrando.azurecr.io/azure-vote-front:30
        imagePullPolicy: IfNotPresent
        env:
          - name: REDIS
            value: azure-vote-back
          - name: NEW_RELIC_APP_NAME
            value: "azure-vote-front"
          - name: NEW_RELIC_LICENSE_KEY
            valueFrom:
              secretKeyRef:
                name: newrelic-key-secret
                key: new_relic_license_key
          - name: NEW_RELIC_LOG
            value: "stdout"
          - name: NEW_RELIC_LOG_LEVEL
            value: "info"
          - name: NEW_RELIC_ENVIRONMENT
            value: "production"
          - name: NEW_RELIC_CONFIG_FILE
            value: "/usr/src/app/newrelic.ini"
      ports:
        - containerPort: 80
          protocol: TCP
      livenessProbe:
        failureThreshold: 3
        httpGet:
          path: /
          port: 80
          scheme: HTTP
      initialDelaySeconds: 15
      periodSeconds: 20
      successThreshold: 1
      timeoutSeconds: 1
    readinessProbe:
      failureThreshold: 3
      httpGet:
        path: /
        port: 80
        scheme: HTTP
      initialDelaySeconds: 5
      periodSeconds: 10
      successThreshold: 1
      timeoutSeconds: 1
    resources: {}
    terminationMessagePath: /dev/termination-log
    terminationMessagePolicy: File
status:
  availableReplicas: 1
  conditions:
  - lastTransitionTime: "2025-11-04T23:38:12Z"
    lastUpdateTime: "2025-11-04T23:49:14Z"
    message: ReplicaSet "azure-vote-front-6db864987" has successfully progressed.
    reason: NewReplicaSetAvailable
    status: "True"
    type: Progressing
  - lastTransitionTime: "2025-11-05T00:05:52Z"
    lastUpdateTime: "2025-11-05T00:05:52Z"
    message: Deployment has minimum availability.
    reason: MinimumReplicasAvailable
    status: "True"
    type: Available
  observedGeneration: 2
  readyReplicas: 1
  replicas: 1
  updatedReplicas: 1
